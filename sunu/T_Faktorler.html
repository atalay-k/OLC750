<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>ğŸ’¹ R ile Veri Analizi</title>
    <meta charset="utf-8" />
    <meta name="author" content="    ğŸ‘©â€ğŸ« DoÃ§. Dr.Â KÃ¼bra ATALAY KABASAKAL   Hacettepe Ãœniversitesi" />
    <script src="libs/header-attrs-2.17/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="slides-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# ğŸ’¹ R ile Veri Analizi
]
.subtitle[
## <br> ğŸ’¹ R FaktÃ¶rler
]
.author[
### <br> <br> ğŸ‘©â€ğŸ« DoÃ§. Dr.Â KÃ¼bra ATALAY KABASAKAL <br> Hacettepe Ãœniversitesi
]
.date[
### <br> <br> <br> <br>ğŸ“§ <a href="mailto:katalay@hacettepe.edu.tr" class="email">katalay@hacettepe.edu.tr</a>
]

---

## FaktÃ¶rler

- FaktÃ¶rler bir veri setindeki **kesikli/sureksiz** deÄŸiÅŸkeni gÃ¶stermektedir. 

- FaktÃ¶rler analizlerde gruplarÄ± belirtir. 

- FaktÃ¶rler hem karakter veri tÃ¼rÃ¼nden hem de sayÄ±sal veri tÃ¼rÃ¼nden oluÅŸturulabilmektedir.

Veri seti ğŸ”—[hsb2.rda](data/hsb2.rda)

```r
load("data/hsb2.rda")
str(hsb2)
```

```
## Classes 'tbl_df', 'tbl' and 'data.frame':	200 obs. of  11 variables:
##  $ id     : int  70 121 86 141 172 113 50 11 84 48 ...
##  $ gender : chr  "male" "female" "male" "male" ...
##  $ race   : chr  "white" "white" "white" "white" ...
##  $ ses    : Factor w/ 3 levels "low","middle",..: 1 2 3 3 2 2 2 2 2 2 ...
##  $ schtyp : Factor w/ 2 levels "public","private": 1 1 1 1 1 1 1 1 1 1 ...
##  $ prog   : Factor w/ 3 levels "general","academic",..: 1 3 1 3 2 2 1 2 1 2 ...
##  $ read   : int  57 68 44 63 47 44 50 34 63 57 ...
##  $ write  : int  52 59 33 44 52 52 59 46 57 55 ...
##  $ math   : int  41 53 54 47 57 51 42 45 54 52 ...
##  $ science: int  47 63 58 53 53 63 53 39 58 50 ...
##  $ socst  : int  57 61 31 56 61 61 61 36 51 51 ...
```

---
## FaktÃ¶rler

- **table()** fonksiyonu ile frekans tablolarÄ± oluÅŸturulur.


```r
table(hsb2$ses)
```

```
## 
##    low middle   high 
##     47     95     58
```

- FaktÃ¶r nesnelerinin aldÄ±ÄŸÄ± deÄŸerlere dÃ¼zey (level) denir.


```r
levels(hsb2$ses)
```

```
## [1] "low"    "middle" "high"
```

---
## FaktÃ¶rler

- **prop.table()** fonksiyonu ile oran tablolarÄ± oluÅŸturulur.


```r
prop.table(table(hsb2$gender))
```

```
## 
## female   male 
##  0.545  0.455
```

- **table()** fonksiyonu ile belirli bir koÅŸul test edilebilir.


```r
table(hsb2$write&gt;50)
```

```
## 
## FALSE  TRUE 
##    74   126
```

---
## FaktÃ¶rler

- **table()** fonksiyonu iÃ§inde birden fazla deÄŸiÅŸken kullanÄ±larak Ã§apraz tablolar oluÅŸturulabilir.

```r
table(hsb2$ses,hsb2$gender)
```

```
##         
##          female male
##   low        32   15
##   middle     48   47
##   high       29   29
```


```r
prop.table(table(hsb2$ses,hsb2$gender))
```

```
##         
##          female  male
##   low     0.160 0.075
##   middle  0.240 0.235
##   high    0.145 0.145
```

---
## FaktÃ¶rler

- Ã–zellikle verinin bir alt kÃ¼mesi ile ilgilendiÄŸinde faktÃ¶r dÃ¼zeyleri kullanÄ±labilir.

- Bu iÅŸlem **subset()** fonksiyonu ile yapÄ±labilir.

```r
devletokulu &lt;- subset(hsb2,schtyp == "public")
head(devletokulu)
```

```
##    id gender  race    ses schtyp       prog read write math science socst
## 1  70   male white    low public    general   57    52   41      47    57
## 2 121 female white middle public vocational   68    59   53      63    61
## 3  86   male white   high public    general   44    33   54      58    31
## 4 141   male white   high public vocational   63    44   47      53    56
## 5 172   male white middle public   academic   47    52   57      53    61
## 6 113   male white middle public   academic   44    52   51      63    61
```


---
## FaktÃ¶rler

- Alt kÃ¼me seÃ§me iÅŸlemi veri dÃ¼zenlemede en sÄ±k kullanÄ±lan paketlerden biri olan `dplyr` paketinin **filter()** 
fonksiyonu ile de yapÄ±labilir.

- `dplyr` paketindeki tÃ¼m fonksiyonlar daha az deÄŸiÅŸken olusturmak amacÄ±yla pipe operatoru `%&gt;%` ile kullanÄ±labilir. `%&gt;%` operator sÄ±k kullanÄ±lan bir operatordur, kÄ±sa yolu: **Ctrl+Shift+M**

Operator kullanÄ±mÄ±


```r
veri seti %&gt;% filter(degisken adi, degisken adi,..)
filter(`veri seti,degisken adi, degisken adi,..)
```



```r
library(dplyr)
hsb2_1 &lt;- hsb2 %&gt;%   filter(schtyp == "public")
```

---
## FaktÃ¶rler

- Veride alt grup seÃ§me iÅŸlemi yapÄ±lsa bile, Ã¶nceki faktÃ¶r dÃ¼zeyleri kalabilir. FaktÃ¶r dÃ¼zeyleri kaldÄ±rmak iÃ§in **droplevels()** fonksiyonu kullanÄ±labilir.



```r
table(devletokulu$schtyp)
```

```
## 
##  public private 
##     168       0
```

```r
devletokulu$schtyp &lt;- droplevels(devletokulu$schtyp)
table(devletokulu$schtyp)
```

```
## 
## public 
##    168
```

---
## FaktÃ¶rler


```r
library(ggplot2)
ggplot(data = hsb2, aes(x = science, y = math, color = prog)) +    geom_point()
```

![](T_Faktorler_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;

---
## FaktÃ¶rler


```r
# cinsiyet nesnesi olusturulmasÄ±

ad  &lt;-  c("Ali","Elif","Su","Deniz","Aras","Berk","Can","Ece","Efe","Arda")
cinsiyet &lt;-c("erkek","kadin","kadin","kadin","erkek","erkek","erkek","kadin","erkek","erkek")
```

- cinsiyet nesnesinin faktÃ¶re/sÃ¼reksiz deÄŸiÅŸkene dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmesi `as.factor()` ya da `factor()` fonksiyonlarÄ± ile saÄŸlanÄ±r.


```r
cinsiyet &lt;- factor(cinsiyet)
cinsiyet
```

```
##  [1] erkek kadin kadin kadin erkek erkek erkek kadin erkek erkek
## Levels: erkek kadin
```

---
## DÃ¼zey Isimlendirme - I

- FaktÃ¶r nesnelerin (grup dÃ¼zeyine sahip nesnelerin) grup dÃ¼zeyleri `levels()` fonksiyonu ile belirlenebilir.


```r
levels(cinsiyet) # faktor duzeyleri alfabetik siralanir.
```

```
## [1] "erkek" "kadin"
```

--

- FaktÃ¶r nesneler grup adlarÄ± ile oluÅŸturulabileceÄŸi gibi, sayÄ±sal nesnelerde faktÃ¶r olarak tanÄ±mlanabilir. OluÅŸan nesnenin grup isimleri/dÃ¼zeyleri `levels()` fonksiyonu ile oluÅŸturulabilir. cinsiyet2 nesnesi oluÅŸturmanÄ±n diÄŸer bir yolu ise aÅŸaÄŸÄ±daki gibidir.


```r
# 1 erkek, 2 kadin olmak uzere yeni nesne olusturulmustur.
cinsiyet2 &lt;-c(1,2,2,2,1,1,1,2,1,1)
cinsiyet2 &lt;- factor(cinsiyet2)
cinsiyet2
```

```
##  [1] 1 2 2 2 1 1 1 2 1 1
## Levels: 1 2
```

```r
levels(cinsiyet2)
```

```
## [1] "1" "2"
```

---
## DÃ¼zey Isimlendirme - I

- SayÄ±sal deÄŸere sahip olan faktÃ¶r nesnesine dÃ¼zey isimleri `levels()` fonksiyonu ile atanabilir.


```r
levels(cinsiyet2) &lt;- c("erkek","kadin")
cinsiyet2
```

```
##  [1] erkek kadin kadin kadin erkek erkek erkek kadin erkek erkek
## Levels: erkek kadin
```

---
## DÃ¼zey SÄ±ralamasÄ± - I

- FaktÃ¶r dÃ¼zeylerinin sÄ±ralanmasÄ± Ã¶zellikle doÄŸrusal modellerde Ã¶nemlidir. EÄŸer dÃ¼zeylerin sÄ±rasÄ± Ã¶nemli ise, `order()` fonksiyonunu kullanarak sÄ±ralama yapabilmektedir.


```r
attach(diamonds)
levels(cut)
```

```
## [1] "Fair"      "Good"      "Very Good" "Premium"   "Ideal"
```

- SÄ±ralandÄ±rÄ±lmÄ±ÅŸ bir faktÃ¶r
---
## DÃ¼zey SÄ±ralamasÄ± - II

- 10 kiÅŸiye alÄ±nacak olan basketbol formalarÄ±nÄ±n beden vektÃ¶rÃ¼ aÅŸaÄŸÄ±daki gibi oluÅŸturulmuÅŸtur.


```r
beden &lt;- c("S","M","S","M","S","L","M","L","S","S")
(beden &lt;- factor(beden))
```

```
##  [1] S M S M S L M L S S
## Levels: L M S
```

- `beden` nesnesi sÄ±ralanmak istediÄŸinde bu sÄ±ralama alfabetik sÄ±ralama ile yapÄ±lÄ±r. Ancak bu sÄ±ralama farklÄ± ÅŸekilde yapÄ±lmak istendiÄŸinde, `ordered()` fonksiyonu kullanÄ±larak faktÃ¶rlerde dÃ¼zey sÄ±ralamasÄ± yapÄ±labilir.


```r
# Duzeylerin siralamasinin kucuten buyuge yapilmasi
(beden&lt;- ordered(beden, levels=c("S","M","L")))
```

```
##  [1] S M S M S L M L S S
## Levels: S &lt; M &lt; L
```

---
## DÃ¼zey SÄ±ralamasÄ± - III

- FaktÃ¶r nesnelerinin karakter deÄŸerleri sayÄ±sal deÄŸerlere dÃ¶nÃ¼ÅŸtÃ¼rÃ¼lebilir.


```r
beden.sayisal &lt;- as.numeric(beden)
beden.sayisal
```

```
##  [1] 1 2 1 2 1 3 2 3 1 1
```

- SayÄ±sal veride olsa matematiksel iÅŸlem yapÄ±lamaz. SayÄ±sal deÄŸerler sadece dÃ¼zeyler iÃ§indir. DÃ¼zeyleri `levels()` fonksiyonu ile isimlendirilebilir.

- Bu ÅŸekilde daha Ã¶nceden sayÄ±sal olarak kayÄ±tlÄ± olan faktÃ¶r nesnelere de dÃ¼zey atanabilir.


```r
levels(beden.sayisal) &lt;-c("S","M","L")
beden.sayisal
```

```
##  [1] 1 2 1 2 1 3 2 3 1 1
## attr(,"levels")
## [1] "S" "M" "L"
```

---
## FaktÃ¶r oluÅŸturma

- DÃ¼zeyleri belirli bir Ã¶rÃ¼ntÃ¼de olan faktÃ¶rler oluÅŸturmak icin, `gl()` fonksiyonu kullanÄ±labilir.

- Fonksiyona dÃ¼zey sayÄ±sÄ± *(n)*,
  - her bir dÃ¼zeyin kaÃ§ kere tekrar edeceÄŸi *(k)*,
  - faktÃ¶r uzunluÄŸu (length),
  - istenirse dÃ¼zeylerin etiketleri ve dÃ¼zeylerin sÄ±ralanma durumu (ordered) girilebilir.


---
## FaktÃ¶r oluÅŸturma



```
##  [1] 0  0  A  A  B  B  AB AB 0  0 
## Levels: 0 A B AB
```

- Ã‡Ä±ktÄ± nasÄ±l oluÅŸturulur?

```
##  [1] A  A  B  B  C  C  D  D  E  E  F1 F1 F2 F2 F3 F3 A  A  B  B 
## Levels: A &lt; B &lt; C &lt; D &lt; E &lt; F1 &lt; F2 &lt; F3
```

---
## **KAYNAKCA**

  **Atar, B., Atalay Kabasakal, K, Ãœnsal Ã–zberk, E. B., Ã–zberk, E. H. Ve KÄ±brÄ±slÄ±oÄŸlu Uysal, N. (2020). R ile Veri Analizi ve Psikometri UygulamalarÄ±, EditÃ¶r, Pegem Akademi, Ankara.**

  Faktorlerle ilgili daha ust duzey islemler icin `forcats` paketi kullanÄ±labilir. &lt;http://www.flutterbys.com.au/stats/downloads/slides/figure/factors.pdf&gt;


---
## **ODEV**

  -   Kitap BÃ¶lÃ¼m 2 1. Soruyu tamamlayÄ±nÄ±z.

-   swirl package - learn R in R (Programming ilk 6 modÃ¼l)





&lt;!-- https://irene.vrbik.ok.ubc.ca/slides/NHSRxaringan.html?panelset1=tab-12#13 --&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-light",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>\n"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
